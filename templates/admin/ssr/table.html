<!-- Admin Table SSR Template -->
<div class="admin-table-container" data-component="AdminTable" data-props="{{ client_props }}">
    <div class="table-header">
        <h2>{{ props.title or 'Data Table' }}</h2>
        <div class="table-actions">
            {% if props.can_add %}
            <a href="{{ props.add_url }}" class="btn btn-primary">Add New</a>
            {% endif %}
        </div>
    </div>

    <div class="table-filters">
        {% if props.search_enabled %}
        <input type="text" class="search-input" placeholder="Search..." value="{{ props.search or '' }}">
        {% endif %}
        {% if props.filters %}
        <div class="filter-controls">
            {% for filter in props.filters %}
            <select class="filter-select" data-filter="{{ filter.name }}">
                <option value="">All {{ filter.label }}</option>
                {% for option in filter.options %}
                <option value="{{ option.value }}" {% if option.selected %}selected{% endif %}>
                    {{ option.label }}
                </option>
                {% endfor %}
            </select>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    {% if props.bulk_actions %}
                    <th class="select-column">
                        <input type="checkbox" class="select-all">
                    </th>
                    {% endif %}
                    {% for column in props.columns %}
                    <th class="column-{{ column.name }}" data-sortable="{{ column.sortable }}">
                        {{ column.label }}
                        {% if column.sortable %}
                        <span class="sort-indicator"></span>
                        {% endif %}
                    </th>
                    {% endfor %}
                    <th class="actions-column">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for row in props.data %}
                <tr class="table-row" data-id="{{ row.id }}">
                    {% if props.bulk_actions %}
                    <td class="select-column">
                        <input type="checkbox" class="row-select" value="{{ row.id }}">
                    </td>
                    {% endif %}
                    {% for column in props.columns %}
                    <td class="column-{{ column.name }}">
                        {{ row[column.name] }}
                    </td>
                    {% endfor %}
                    <td class="actions-column">
                        <a href="{{ props.edit_url_pattern.replace('{id}', row.id|string) }}" class="btn btn-sm btn-outline">Edit</a>
                        {% if props.can_delete %}
                        <button class="btn btn-sm btn-danger delete-btn" data-id="{{ row.id }}">Delete</button>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if props.pagination %}
    <div class="table-pagination">
        <div class="pagination-info">
            Showing {{ props.pagination.start }} to {{ props.pagination.end }} of {{ props.pagination.total }} entries
        </div>
        <div class="pagination-controls">
            {% if props.pagination.has_prev %}
            <a href="?page={{ props.pagination.prev_page }}" class="btn btn-sm">Previous</a>
            {% endif %}
            {% for page in props.pagination.pages %}
            <a href="?page={{ page }}" class="btn btn-sm {% if page == props.pagination.current %}active{% endif %}">
                {{ page }}
            </a>
            {% endfor %}
            {% if props.pagination.has_next %}
            <a href="?page={{ props.pagination.next_page }}" class="btn btn-sm">Next</a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Hydration data -->
    <script type="application/json" data-hydration="{{ component_name }}">
        {{ hydration_data }}
    </script>
</div>